---
const links = [
  { ref: '01', name: 'ACCUEIL', href: '/' },
  { ref: '02', name: 'À propos', href: '/about' },
  { ref: '03', name: 'Tarification', href: '/pricing' },
  { ref: '04', name: 'Contact', href: '/contact' },
];
---

<header 
  x-data="{ open: false }"
  x-init="$el.classList.add('opacity-0','translate-y-[-10px]'); setTimeout(()=>{$el.classList.remove('opacity-0','translate-y-[-10px]')},50)"
  class="sticky top-0 z-50 backdrop-blur-xl bg-white/30 dark:bg-gray-900/20 border-b border-white/20 dark:border-white/10 
         shadow-[0_4px_30px_rgba(0,0,0,0.05)] transition-all duration-500 ease-out opacity-100 translate-y-0"
  :class="{ 'bg-white/60 dark:bg-gray-900/50 shadow-lg border-white/30 dark:border-white/20': open }"
>
  <div class="mx-auto flex max-w-7xl items-center justify-between  px-4 py-2 sm:px-6 sm:py-3">

    <!-- Logo -->
    <div class="flex items-end gap-2 transition-all duration-300 hover:opacity-90">
      <a href="/" class="focus-visible:outline focus-visible:outline-2 focus-visible:outline-primary-950 dark:focus-visible:outline-primary-200 rounded-md">
        <span class="sr-only">ENVSCO</span>
        <img 
          class="h-10 w-auto transition-all duration-300 hover:scale-[1.03]" 
          :src="$store.theme.isDark ? '/assets/logo.png' : '/assets/logo-inverted.png'" 
          alt="ENVSCO"
        />
      </a>
      <h5 class="text-xs font-medium text-gray-600 dark:text-gray-300 leading-none translate-y-[1px]">
        L’école, inclusive.
      </h5>
    </div>

    <!-- Actions -->
    <div class="flex items-center space-x-3">

      <!-- Toggle theme -->
      <button
        type="button"
        class="h-12 w-12 flex items-center justify-center rounded-full backdrop-blur-md bg-white/20 dark:bg-gray-800/20 
               border border-white/20 dark:border-white/10 text-primary-950 dark:text-primary-200 
               hover:bg-white/30 dark:hover:bg-gray-800/30 transition-all duration-300"
        @click="$store.theme.toggle()"
      >
        <span class="sr-only">Toggle theme</span>

        <!-- Moon -->
        <svg x-cloak class="h-6 w-6" :class="{ 'hidden': !$store.theme.isDark }" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18Z"/>
        </svg>

        <!-- Sun -->
        <svg x-cloak class="h-6 w-6" :class="{ 'hidden': $store.theme.isDark }" fill="currentColor" viewBox="0 0 24 24">
          <path d="M10 6C10 10.4183 13.5817 14 18 14C19.4386 14 20.7885 13.6203 21.9549 12.9556C21.4738 18.0302 17.2005 22 12 22C6.47715 22 2 17.5228 2 12C2 6.79948 5.9698 2.52616 11.0444 2.04507C10.3797 3.21152 10 4.56142 10 6Z"/>
        </svg>
      </button>

      <!-- Mobile menu toggle -->
      <button
        type="button"
        class="h-12 w-12 flex items-center justify-center rounded-full backdrop-blur-md bg-white/20 dark:bg-gray-800/20 
               border border-white/20 dark:border-white/10 text-primary-950 dark:text-primary-200 
               hover:bg-white/30 dark:hover:bg-gray-800/30 transition-all duration-300"
        @click="open = !open"
      >
        <span class="sr-only">Toggle menu</span>

        <!-- Burger -->
        <svg x-cloak class="h-7 w-7" :class="{ 'hidden': open }" fill="currentColor" viewBox="0 0 24 24">
          <path d="M19 8H5V10H19V8ZM19 14H5V16H19V14Z"/>
        </svg>

        <!-- Close -->
        <svg x-cloak class="h-7 w-7" :class="{ 'block': open, 'hidden': !open }" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 10.586L16.95 5.636L18.364 7.05L13.414 12L18.364 16.95L16.95 18.364L12 13.414L7.05 18.364L5.636 16.95L10.586 12L5.636 7.05L7.05 5.636L12 10.586Z"/>
        </svg>
      </button>

    </div>
  </div>

  <!-- Menu -->
  <div 
    id="website-menu"
    x-cloak
    x-show="open"
    x-collapse
    class="backdrop-blur-2xl bg-white/40 dark:bg-gray-900/30 border-t border-white/20 dark:border-white/10 
           shadow-xl rounded-b-3xl transition-all duration-500"
  >
    <div class="mx-auto max-w-7xl px-4 py-10 sm:px-6">

      <nav class="flex flex-col gap-4">
        {
          links.map((link) => (
            <a 
              href={link.href}
              class="group flex items-center justify-between py-4 text-3xl sm:text-4xl font-medium 
                     text-primary-950 dark:text-primary-200 transition-all duration-300"
            >
              <div class="flex items-center gap-6">
                <span class="text-xs opacity-60">{link.ref}</span>
                <span class="relative">
                  {link.name}
                  <span class="absolute left-0 bottom-0 w-0 h-[2px] bg-primary-600 dark:bg-primary-400 
                               transition-all duration-300 group-hover:w-full"></span>
                </span>
              </div>

              <svg class="h-7 w-7 text-primary-600 dark:text-primary-400 transition-transform duration-300 group-hover:translate-x-1" fill="currentColor" viewBox="0 0 24 24">
                <path d="M16 9.4L7.4 18L6 16.6L14.6 8H7V6H18V17H16V9.4Z"/>
              </svg>
            </a>
          ))
        }
      </nav>

    </div>
  </div>
</header>

<!-- Scroll effect -->
<script is:inline>
document.addEventListener("scroll", () => {
  const header = document.querySelector("header");
  if (window.scrollY > 10) {
    header.classList.add("bg-white/60","dark:bg-gray-900/60","shadow-lg");
  } else {
    header.classList.remove("bg-white/60","dark:bg-gray-900/60","shadow-lg");
  }
});
</script>
