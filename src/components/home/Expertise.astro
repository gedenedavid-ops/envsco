---
const features = [
  {
    id: 'engagement-1',
    name: 'Simplicit√© avant tout',
    description:
      "Chaque fonctionnalit√© d‚ÄôENVSCO est pens√©e pour all√©ger le quotidien scolaire, pas pour l‚Äôalourdir. Nous privil√©gions une exp√©rience claire, intuitive et accessible.",
  },
  {
    id: 'engagement-2',
    name: 'Communication fluide',
    description:
      "Nous voulons connecter √©l√®ves, parents, enseignants et administration autour d‚Äôun m√™me espace, pour r√©duire les pertes d‚Äôinformation et am√©liorer le suivi scolaire.",
  },
  {
    id: 'engagement-3',
    name: 'S√©curit√© et confidentialit√©',
    description:
      "Les donn√©es scolaires sont sensibles. ENVSCO adopte une approche responsable, avec des standards modernes de protection et de confidentialit√©.",
  },
  {
    id: 'engagement-4',
    name: 'Accessibilit√© pour tous',
    description:
      "L‚Äô√©ducation doit √™tre inclusive. Nous construisons une plateforme utilisable par tous, quels que soient les appareils, les comp√©tences ou les contraintes.",
  },
  {
    id: 'engagement-5',
    name: '√âvolution progressive',
    description:
      "Le carnet digital n‚Äôest que le d√©but. ENVSCO se construit √©tape par √©tape, en ajoutant des modules r√©ellement utiles et valid√©s par le terrain.",
  },
  {
    id: 'engagement-6',
    name: 'Co‚Äëcr√©ation avec les √©coles',
    description:
      "Nous travaillons main dans la main avec nos √©coles pilotes pour b√¢tir un environnement scolaire num√©rique adapt√© aux r√©alit√©s du terrain.",
  },
];
---

<section 
  class="py-16 sm:py-20 relative overflow-hidden"
  x-data="{ lightX: 50, lightY: 50 }"
  @mousemove="lightX = ($event.clientX / innerWidth) * 100; lightY = ($event.clientY / innerHeight) * 100"
>

  <!-- üåü Halo Vision Pro -->
  <div 
    class="pointer-events-none absolute inset-0 opacity-50 blur-3xl transition-all duration-500"
    :style="`background: radial-gradient(circle at ${lightX}% ${lightY}%, rgba(120,160,255,0.35), transparent 70%)`"
  ></div>

  <div class="relative mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="grid gap-12 lg:grid-cols-3 lg:gap-8">
      
      <h2 class="text-3xl font-medium tracking-tight sm:text-4xl">
        Nos engagements
      </h2>

      <div class="lg:col-span-2">
        <dl
          class="-mt-3"
          x-data="{ selected: null, toggle(v){ this.selected = this.selected === v ? null : v } }"
        >

          {features.map((feature, index) => (
            <div
              x-data={`{ id: ${index}, get isOpen(){ return this.id === this.selected } }`}
              class="relative rounded-3xl px-5 py-2 mb-8 transition-all duration-500 backdrop-blur-xl border border-white/10"
              x-bind:class="{
                'bg-white/10 dark:bg-white/5 shadow-[0_0_40px_rgba(120,160,255,0.25)] scale-[1.02]': isOpen,
                'bg-white/5 dark:bg-white/0': !isOpen
              }"
            >

              <!-- Gradient Apple subtil -->
              <div 
                class="absolute inset-0 rounded-3xl opacity-0 transition-all duration-500 pointer-events-none"
                x-bind:class="{ 'opacity-100 bg-gradient-to-br from-white/20 via-white/5 to-transparent': isOpen }"
              ></div>

              <!-- Glow interne VisionOS -->
              <div 
                class="absolute inset-0 rounded-3xl opacity-0 blur-xl transition-all duration-700 pointer-events-none"
                x-bind:class="{ 'opacity-40 bg-[radial-gradient(circle_at_center,rgba(150,180,255,0.35),transparent_70%)]': isOpen }"
              ></div>

              <dt
                class="border-b text-lg transition-all relative z-10"
                x-bind:class="{ 
                  'border-transparent': isOpen, 
                  'border-neutral-300 dark:border-neutral-700': !isOpen 
                }"
              >
                <button
                  type="button"
                  class="group block w-full py-6 text-left transition"
                  x-on:click="toggle(id)"
                  :aria-expanded="isOpen.toString()"
                >
                  <div class="flex items-center justify-between">
                    <span class="font-medium">{feature.name}</span>

                    <svg
                      class="h-6 w-6 text-black dark:text-white transform transition duration-300"
                      x-bind:class="{ '-rotate-180': isOpen }"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 24 24"
                      fill="currentColor"
                    >
                      <path d="M11.9997 13.1714L16.9495 8.22168L18.3637 9.63589L11.9997 15.9999L5.63574 9.63589L7.04996 8.22168L11.9997 13.1714Z" />
                    </svg>
                  </div>
                </button>
              </dt>

              <!-- Contenu -->
              <dd 
                class="pb-6 pr-6 relative z-10"
                x-show="isOpen"
                x-collapse
                x-cloak
              >
                <p class="text-neutral-700 dark:text-neutral-300 leading-relaxed">
                  {feature.description}
                </p>
              </dd>

            </div>
          ))}

        </dl>
      </div>

    </div>
  </div>
</section>
