---
const questions = [
  {
    id: 'faq-1',
    title: "Comment devenir une école pilote ?",
    answer:
      "Les écoles pilotes bénéficient d’un accès complet aux fonctionnalités en développement et participent directement à la co‑construction d’ENVSCO. Il suffit de nous contacter via le formulaire pour rejoindre le programme.",
  },
  {
    id: 'faq-2',
    title: "L’accès est-il gratuit pendant la phase pilote ?",
    answer:
      "Oui. Les établissements pilotes utilisent ENVSCO gratuitement durant toute la période de test, sans engagement.",
  },
  {
    id: 'faq-3',
    title: "Quelles fonctionnalités sont disponibles aujourd’hui ?",
    answer:
      "Nous avançons étape par étape. Le carnet digital est la première brique, suivie de modules de communication, de suivi scolaire et d’administration.",
  },
  {
    id: 'faq-4',
    title: "Quand la version complète sera-t-elle disponible ?",
    answer:
      "La version publique sera lancée après la phase pilote, une fois les retours des établissements intégrés et validés.",
  },
  {
    id: 'faq-5',
    title: "Comment sont gérées les données scolaires ?",
    answer:
      "Nous adoptons une approche responsable : sécurité moderne, confidentialité stricte et stockage conforme aux bonnes pratiques du secteur éducatif.",
  },
  {
    id: 'faq-6',
    title: "Comment obtenir de l’aide ou du support ?",
    answer:
      "Les écoles pilotes bénéficient d’un accompagnement direct. Vous pouvez nous contacter à tout moment via la page dédiée.",
  },
];
---

<section 
  class="py-20 sm:py-28 relative overflow-hidden"
  x-data="{ lightX: 50, lightY: 50 }"
  @mousemove="lightX = ($event.clientX / innerWidth) * 100; lightY = ($event.clientY / innerHeight) * 100"
>

  <!-- Halo Vision Pro -->
  <div 
    class="pointer-events-none absolute inset-0 opacity-40 blur-3xl transition-all duration-500"
    :style="`background: radial-gradient(circle at ${lightX}% ${lightY}%, rgba(120,160,255,0.25), transparent 70%)`"
  ></div>

  <div class="relative mx-auto max-w-2xl px-4 sm:px-6 lg:max-w-7xl lg:px-8">

    <div class="grid gap-12 lg:grid-cols-3 lg:gap-16">

      <!-- Titre -->
      <div 
        class="fade-block relative rounded-3xl px-8 py-10
               backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/10
               shadow-[0_0_40px_rgba(120,160,255,0.15)]"
      >
        <!-- Glow interne -->
        <div 
          class="absolute inset-0 rounded-3xl opacity-20 blur-2xl pointer-events-none
                 bg-[radial-gradient(circle_at_center,rgba(150,180,255,0.25),transparent_70%)]"
        ></div>

        <h2 class="relative z-10 text-3xl font-medium tracking-tight sm:text-4xl text-gray-900 dark:text-white">
          Questions fréquentes
        </h2>
      </div>

      <!-- FAQ -->
      <div class="lg:col-span-2 fade-block">
        <dl
          class="-mt-3 space-y-4"
          x-data="{ selected: null, toggle(value) { this.selected = this.selected === value ? null : value } }"
        >
          {
            questions.map((question, index) => (
              <div
                class="relative rounded-3xl px-6 py-2 transition-all duration-500
                       backdrop-blur-xl bg-white/5 dark:bg-white/5 border border-white/10
                       shadow-[0_0_20px_rgba(120,160,255,0.10)]
                       hover:shadow-[0_0_35px_rgba(120,160,255,0.20)]"
                x-data={`{ id: ${index}, get isOpen() { return this.id === this.selected }, get isNextOpen() { return (this.id + 1) === this.selected } }`}
              >

                <!-- Glow interne -->
                <div 
                  class="absolute inset-0 rounded-3xl opacity-10 blur-xl pointer-events-none
                         bg-[radial-gradient(circle_at_center,rgba(150,180,255,0.25),transparent_70%)]"
                ></div>

                <dt
                  class="relative z-10 border-b text-lg transition"
                  x-bind:class="{ 
                    'border-transparent': isOpen || isNextOpen, 
                    'border-white/10': !(isOpen || isNextOpen) 
                  }"
                >
                  <button
                    type="button"
                    class="group block w-full py-6 text-left transition focus-visible:outline-none"
                    aria-controls={question.id}
                    x-on:click="toggle(id)"
                    x-bind:aria-expanded="isOpen.toString()"
                  >
                    <div class="flex items-center justify-between rounded-3xl">
                      <span class="font-medium text-gray-900 dark:text-white">{question.title}</span>

                      <span class="ml-6 flex h-7 items-center">
                        <svg
                          class="h-6 w-6 text-emerald-600 dark:text-emerald-400 transform transition duration-300 ease-in-out"
                          x-bind:class="{ '-rotate-180': isOpen, 'rotate-0': !isOpen }"
                          xmlns="http://www.w3.org/2000/svg"
                          viewBox="0 0 24 24"
                          fill="currentColor"
                          aria-hidden="true"
                        >
                          <path d="M11.9997 13.1714L16.9495 8.22168L18.3637 9.63589L11.9997 15.9999L5.63574 9.63589L7.04996 8.22168L11.9997 13.1714Z" />
                        </svg>
                      </span>
                    </div>
                  </button>
                </dt>

                <dd 
                  class="relative z-10 pb-6 pr-2"
                  id={question.id}
                  x-show="isOpen"
                  x-collapse
                >
                  <p class="text-neutral-700 dark:text-neutral-300 text-base leading-relaxed">
                    {question.answer}
                  </p>
                </dd>

              </div>
            ))
          }
        </dl>
      </div>

    </div>
  </div>
</section>
